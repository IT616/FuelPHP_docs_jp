<!doctype html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./../assets/css/combined.css">
	<link rel="shortcut icon" href="./../favicon.ico" />
	<script src="http://www.google.com/jsapi" type="text/javascript"></script>
	<script type="text/javascript">
		var path = './../';
	</script>
	<script src="./../assets/js/combined.js"></script>
	<title>インストール方法 - インストール - FuelPHP ドキュメント</title>
</head>
<body>
	<div id="container">
		<header id="header">
			<div class="table">
				<h1>
					<a href="http://fuelphp.com"><img height="37px" width="147px" src="./../assets/img/fuel.png" /></a>
					<strong>Documentation</strong>
				</h1>

				<form id="google_search">
					<p>
						<span id="search_clear">&nbsp;</span>
						<input type="submit" name="search_submit" id="search_submit" value="検索" />
						<input type="text" value="" id="search_input" name="search_input" />
					</p>
				</form>
			</div>
			<nav>

				<div class="clear"></div>
			</nav>
			<a href="#" id="toc_handle">目次</a>
			<div class="clear"></div>
		</header>

		<div id="cse">
			<div id="cse_point"></div>
			<div id="cse_content"></div>
		</div>

		<div id="main">

			<h2 id="prerequisites">前提条件</h2>
			<p>
				FuelPHPはインストールとパッケージの依存管理にComposerを利用しています。下記のインストール方法はComposerが存在していることを前提としているので、
				FuelPHPのインストールを続ける前に、あなたのローカル環境にComposerがインストールされていることを確認してください。
				Composerをあなたのマシンにインストールする方法は<a href="https://getcomposer.org/download/">こちらのページ</a>を参照してください。
			</p>

			<h2 id="command">コマンドラインからのインストール</h3>
			<h3 id="command-oil">Oil を使用する</h3>

			<p>我々のクイックインストーラは Oil パッケージ用に書き下ろされたインターフェースです。これを使用すると 1つのコマンドで新しいプロジェクトを生成することができます。oil コマンドで <code class="cli">php</code> を使用する必要もありません。</p>

            <p>クイックインストーラをインストールするためには、シェルを開き次のコマンドを実行するだけです：</p>

			<pre class="cli"><code>$ curl get.fuelphp.com/oil | sh</code></pre>

			<p class="note">この場合、スクリプトを /usr/bin にインストールするためパスワードを尋ねてくるでしょう。</p>

			<p>これであなたのプロジェクトでは <code class="cli">php oil</code> の代わりに <code class="cli">oil</code> だけを使用することができます。</p>

			<p class="note">バージョン 1.6 以前の oil スクリプトをインストール済みの場合は、composer を実行させるために再度、インストールし直す必要があります!</p>

			<p>新しいプロジェクトを作成するには単に以下を実行します:</p>

			<pre class="cli"><code>$ oil create &lt;project_name&gt;</code></pre>

			<p>これで、カレントディレクトリにあなたが指定したプロジェクト名のフォルダが作成されます。そしてリポジトリとすべてのサブモジュールをそのフォルダに複製します。</p>

			<p>
				Note: これは、必要なディレクトリを書き込み可能にするための <code class="cli">$ oil refine install</code> も実行します。
				そして、Composer により定義された依存ライブラリを取得する <code class="cli">$ composer update</code> も実行します。
			</p>
			<p class="note">この方法は現在 *nix システム (Linux, OS X, Unix など) でのみ動作します。</p>

			<h3 id="command-composer">Composer を使用する</h3>

			<p>これはバーチャルホストのルートディレクトリに FuelPHP フレームワークをデフォルトインストールします。</p>

			<h4 id="from_github">GitHub から最新のリリースを clone する</h4>

<pre class="cli"><code>$ cd /where/ever/your/virtualhost/root/is
$ git clone git://github.com/fuel/fuel.git .
$ composer install --prefer-dist
</code></pre>

			<p>最後のドットを忘れないでください。さもないと、バーチャルホストのルートディレクトリに <strong>fuel</strong> というフォルダが作成されます!</p>

			<p>別の方法として、Composer を使いすべてをインストールすることもできます:</p>
<pre class="cli"><code>$ composer create-project fuel/fuel --prefer-dist .
</code></pre>

			<p>
				最初の方法は、gitリポジトリとしてインストールされたアプリケーションを含めてインストールできる利点があります。
				リポジトリを独自の git サーバー変更することができます。これにより、あなたのアプリケーション開発はバージョン管理下にあります。
			</p>
			<p>
				2つ目の方法は、全ての依存関係を持つ完全なパッケージを作成します。もし、 git リポジトリに追加したい場合は、全ての依存関係をそれに追加します。
				もし、全てのアプリケーションの依存関係をダウンロードするためにローカルで composer を実行する手段がない production をターゲットサーバとする場合は、
				こちらを利用した方がよいでしょう。
			</p>

			<h4 id="from_github">GitHub から最新の開発ブランチを clone する</h4>

<pre class="cli"><code>$ cd /where/ever/your/virtualhost/root/is
$ git clone git://github.com/fuel/fuel.git -b 1.9/develop .
$ composer install
</code></pre>

			<p>最後のドットを忘れないでください。さもないと、バーチャルホストのルートディレクトリに <strong>fuel</strong> というフォルダが作成されます!</p>

			<p>別の方法として、Composer を使いすべてをインストールすることもできます:</p>
<pre class="cli"><code>$ composer create-project fuel/fuel:dev-1.9/develop --prefer-source .
</code></pre>

			<p>どちらも全く同じことを行い、ローカルの git リポジトリにクローンとして最新の開発版をインストールします。</p>

			<h3 id="from_zip">Zip ファイルをダウンロードする</h3>

			<p>
				何らかの理由で、 Composer にアクセスできない場合は、 Zip ファイルで<a href="download.html">Fuel Framework をダウンロード</a>することができます。
				これは、 Composer コマンド <code class="cli">create-project fuel/fuel --prefer-dist .</code> が生成するものと全く同じものを含んでいます。
			</p>

			<h2 id="structure">デフォルトのインストールを変更する</h2>

			<p>
				インストール後、インストールしたディレクトリには次のようなフォルダ構造が配置されます:
			</p>
<pre class="plain"><code>/
  docs/
  fuel/
    app/
    core/
    packages/
  public/
    .htaccess
    assets/
    index.php
  oil
</code></pre>

			<p>
				この構造では、ソース上の public ディレクトリは、 Web サーバの公開ディレクトリと同一です。
				もし、Webサーバの設定で自分のパブリックフォルダ (またはドキュメントルート) を定義できない場合は、
				public ディレクトリの内容をプロバイダが指定するフォルダ (public_html 、 public 、 htdocs など) に移動します。
			</p>

			<p>
				fuel ディレクトリの場所を変更したい場合、または fuel ディレクトリ内の任意のディレクトリを移動する場合、
				正しい app 、 core および packages ディレクトリを指すように Web フロントローダー (public/index.php) と
				コマンドラインフロントローダー (oil) に定義された定数を変更する必要があります。
			</p>

			<p>インストールの後は、フレームワークがアクセスする必要のあるフォルダのパーミッションが正しいことを確認してください。 デフォルトのフォルダを書き込み可能にする
				oil タスクが用意されています:</p>
<pre class="cli"><code>$ oil refine install
	Made writable: APPPATH/cache
	Made writable: APPPATH/logs
	Made writable: APPPATH/tmp
	Made writable: APPPATH/config</code></pre>
			<p>
				もしこのページのはじめに記載されている oil をインストールしていない場合は、次のようにインストールしたルートディレクトリから oil を実行することができます:
			</p>
<pre class="cli"><code>$ cd /where/ever/your/virtualhost/root/is
$ php oil refine install
	Made writable: APPPATH/cache
	Made writable: APPPATH/logs
	Made writable: APPPATH/tmp
	Made writable: APPPATH/config
</code>
</pre>

			<h2 id="configuration">設定</h2>

			<p>メインの設定は app/config/config.php にあります。好きに編集してください。</p>

			<h2 id="url_rewriting">URL のリライト</h2>

			<p>
				Fuel には Apache (.htaccess) と IIS (web.config) のデフォルトの リライトルールが付属されています。
				これらのファイルは Web アプリケーションの DOCROOT (デフォルトでは public フォルダ) で見つけることができます。
				Nginx を使用する場合は、 <a href="#nginx">こちら</a>の例から見つけてください。
			</p>
			<p class="note">
				デフォルトの Web サーバの構成によっては、 URL の rewrite がデフォルトで無効になっていることに注意してください。
				このような場合を迅速にチェックするには、リライト定義 (例えば .htaccess) に入力ミスをします。
				Web サーバがそのファイルを読み込み処理することができる場合は、入力ミスによって 500 サーバエラーになるはずです。
				もしあなたが記述した入力ミスで変更がない場合は、リライトが書き換えられているかグローバル定義で htaccess 処理が無効に
				なっています。
			</p>

				
			<h2 id="install_inside_root">ドキュメントルート内にインストールする</h2>

			<p>セキュリティ上の理由から、 Web サーバのドキュメントルート内に Fuel をインストールすることは <strong>強く推奨されていません</strong> 。</p>
			<p>
				しかしながらそうしたいケースもあります。例えば、Apache の大量の動的なバーチャルホストモジュールのある (ローカルの) 開発環境は、
				Web サーバを再起動せずに新しい開発環境を素早く構築するために使用されます。
			</p>
			<p>
				これが必要な場合、ルートと決めたフォルダに FuelPHP をインストールします。その後、public フォルダに移動し、
				すべてのファイルを 1つ上の階層に移動し、public フォルダを削除します。public フォルダの唯一の目的は、Web サーバのドキュメントルートのためのアンカーポイントを提供することです。
				FuelPHP をドキュメントルートフォルダにインストールしたら、もはや必要ありません。
			</p>
			<p>移動した後、index.php の中のアプリケーション、パッケージ、フレームワークコアの場所を変更します:</p>
            <pre class="php"><code>define('APPPATH', realpath(__DIR__.'/fuel/app/').DIRECTORY_SEPARATOR);<br>define('PKGPATH', realpath(__DIR__.'/fuel/packages/').DIRECTORY_SEPARATOR);<br>define('COREPATH', realpath(__DIR__.'/fuel/core/').DIRECTORY_SEPARATOR);</code></pre>

			<h3 id="install_inside_root2">いくつかのフォルダをより深くするのはどうでしょう？</h3>

			<p>違いはありません。手順はまったく同じです。</p>

			<p>
				しかしながら、この場合のアプリケーションへのアクセスは、フォルダ構成のため少々複雑になるかもしれません。同じフォルダ構成のまま移動したファイル群にそのままアクセスすることは、
				従来の .htaccess ではできません。
			</p>
			<p>
				FuelPHP がドキュメントルートの "/deep/sub/folder"  にインストールされているとすると、通常ならば
				http://example.org/deep/sub/folder でアプリーケーションにアクセスする必要があります。
			</p>

			<h4>Apache</h4>
			<p>
				上位フォルダのどこかに以下の .htaccess を置くことで、存在しないファイルやディレクトリにアクセスがあった場合に、
				あなたのアプリケーションにリダイレクトをさせることができます:</p>
<pre class="plain"><code>&lt;IfModule mod_rewrite.c>
	RewriteEngine on

	# 存在するファイルやフォルダでなかったり、ルートへのリクエストの場合、リクエストをサブフォルダに送る
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d [OR]
	RewriteCond $1 ^$

	RewriteRule ^(.*)$ /deep/sub/folder [R=301,L]
&lt;/IfModule>
</code>
</pre>
			<p>これはリダイレクトであることに注意してください。ユーザにサブフォルダを隠しません。もし、サブフォルダを隠したい場合は、代わりに以下を使ってください:</p>

<pre class="plain"><code>&lt;IfModule mod_rewrite.c>
	RewriteEngine on

	# 存在するファイルやフォルダでなかったり、ルートへのリクエストの場合、リクエストをサブフォルダに送る
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d [OR]
	RewriteCond $1 ^$

	RewriteRule ^(.*)$ /deep/sub/folder [QSA,L]
&lt;/IfModule>
</code>
</pre>
			<p>もちろん、もし "sub" フォルダに配置した場合は、URL から "sub/folder" を隠せますが、"deep" は隠せません...</p>

			<p class="note">
				.htaccess を有効にすると Apache はかなりスローダウンすることに注意してください。サーバ設定へのアクセス権を持っている場合は、
				これを無効にし、バーチャルホストの定義に rewrite のルールを追加することを検討してください。
			</p>

			<h4 id="nginx">Nginx</h4>

			<p>
				Nginx はクライアントの設定ファイルをサポートしていませんので、Nginx の設定ファイルにバーチャルホストのための rewrite ルールを追加する必要があります。
				ガイドラインとして以下を使用できます:
			</p>

<pre class="plain"><code>server {
	server_name fuelphp.local;

	# これらのファイルに Nginx が書き込めることを確認する
	access_log /var/www/fuelphp/nginxlogs/access.log;
	error_log /var/www/fuelphp/nginxlogs/error.log;
	root /var/www/fuelphp/public;

	location / {
		index index.php;
		try_files $uri $uri/ /index.php$is_args$args;
	}

	location ~ \.php$ {
		include /etc/nginx/fastcgi_params;
		fastcgi_pass 127.0.0.1:9000;
		fastcgi_index index.php;
		fastcgi_param FUEL_ENV "production";
		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
	}
}
</code></pre>

			<h2 id="setting_the_environment">環境を設定する</h2>

			<p>
				デフォルトでは、環境は開発モードにセットされています。Fuel は環境を使用して、使用するデータベース設定を定義します。しかし、他のことにも利用できます。
			</p>
			<p>
				環境を設定するために、.htaccess ファイルに次の行を追加します。
			</p>
			<pre class="plain"><code>SetEnv FUEL_ENV production</code></pre>
			<p>
				Nginx では、上の例にあるように "fastcgi_param" 文を使います。使用できるオプションの詳細は Fuel クラスの <a href="../classes/fuel.html#class_constants">クラス定数</a> にあります。
			</p>

		</div>

		<footer>
			<p>
				&copy; FuelPHP Development Team 2010-2016 - <a href="http://fuelphp.com">FuelPHP</a> is released under the MIT license.
[ <a href="https://github.com/fuel/docs/commits/1.8/develop/installation/instructions.html">原文コミット履歴</a> | <a href="https://github.com/NEKOGET/FuelPHP_docs_jp/commits/1.8/develop_japanese/installation/instructions.html">翻訳コミット履歴</a> | <a href="https://github.com/NEKOGET/FuelPHP_docs_jp/blob/1.8/develop_japanese/installation/instructions.html">GitHubで修正</a> ]
			</p>
		</footer>
	</div>
</body>
</html>
